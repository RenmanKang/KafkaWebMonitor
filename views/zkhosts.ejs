<!DOCTYPE html>
<html>
<head>
	<title>Kafka Web Monitor</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="shortcut icon" href="/favicon.ico" />
	<link rel="stylesheet" href="/lib/bootstrap-3.3.4/css/bootstrap.min.css" />
	<link rel="stylesheet" href="/lib/bootstrap-table/bootstrap-table.min.css" />
	<link rel="stylesheet" href="/css/style.css" />
	<style>
		.content { background-color:#fff;margin: 20px; text-align: center; width: 90%; }
		.title { font-weight: 500; font-size: 20px; padding: 10px; margin-bottom: 26px; }
		.hosts { width:50%; }
		.chroot { width:20% }
	</style>
</head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="">
		<div class="navbar-header">
			<a class="navbar-brand" href="/">Kafka Web Monitor</a>
		</div>
	</div>
</div>
<div>
	<div class= "content sec-index" style="">
		<div class="title"><%= __('Add Zookeeper Connection') %></div>
		<div id="alert-div"></div>
		<form id="add-form" class="form-inline">
			<div class="input-group hosts">
				<input type="text" class="form-control" id="hosts" name="hosts" value="<%= (zkConf && zkConf.hosts) %>" placeholder="<%= __('Zookeeper connection string') %>" />
			</div>
			<div class="input-group chroot">
				<input type="text" class="form-control" id="chroot" name="chroot" value="<%= (zkConf && zkConf.chroot) %>" placeholder="<%= __('Chroot string(optional)') %>" />
			</div>
			<div class="input-group">
				<button type="button" class="btn btn-info" id="add-btn" title="<%= __('Add') %>">
					<%= __('Add') %>
				</button>
				<% if(zkConf) { %>
					<button type="button" class="btn btn-warning" id="cancel-btn" title="<%= __('Cancel') %>">
						<%= __('Cancel') %>
					</button>
				<% } %>
			</div>
		</form>
	</div>
</div>
<% include ./modals %>
<script type="text/javascript" src="/lib/jquery/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/lib/bootstrap-3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/lib/bootstrap-table/bootstrap-table.min.js"></script>
<script type="text/javascript" src="/lib/moment/moment.js"></script>
<script type="text/javascript" src="/js/script.js"></script>
<script>
	$('#add-btn').on('click', function() {
		var hosts = $('#hosts').val();
		if(isEmpty(hosts)) {
			BSAlert('danger', "<%= __('Zookeeper connection string input required') %>", '#alert-div', true);
			return;
		}
		$.ajax({
			type: 'post',
			url: '/zkHosts',
			dataType: 'json',
			data: $('#add-form').serialize(),
			success: function(result) {
				if(result.status === 200) {
					location.href = '/';
				} else {
					BSAlert('danger', result.message, '#alert-div', true);
				}
			},
			error: function(err) {
				console.log(err);
				BSAlert('danger', err, '#alert-div', true);
			}
		});
	});

	$('#cancel-btn').on('click', function() {
		location.href = '/';
	});

	$(function() {
		$('#hosts').focus();
	});
</script>
</body>
</html>
